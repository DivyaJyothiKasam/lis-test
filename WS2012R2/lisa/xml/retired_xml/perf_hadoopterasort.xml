<?xml version="1.0" encoding="utf-8"?>
<config>
  <global>
    <logfileRootDir>TestResults</logfileRootDir>
    <defaultSnapshot>ICABase</defaultSnapshot>
    <LisaInitScript>
        <file>.\setupScripts\CreateVMs.ps1</file>
    </LisaInitScript>
    <email>
      <recipients>
        <to>myboss@mycompany.com</to>
        <to>myself@mycompany.com</to>
      </recipients>
      <sender>myself@mycompany.com</sender>
      <subject>LIS Performance Test Results</subject>
      <smtpServer>mysmtphost.mycompany.com</smtpServer>
    </email>
    <imageStoreDir>\\image\path</imageStoreDir>
  </global>
  <testSuites>
    <suite>
      <suiteName>PerfTeraSort</suiteName>
      <suiteTests>
        <suiteTest>Perf_TeraSort</suiteTest>
      </suiteTests>
    </suite>
  </testSuites>
  <testCases>
    <test>
      <testName>Perf_TeraSort</testName>
      <PreTest>setupScripts\HadoopConfig.ps1</PreTest>
      <testScript>perf_hadoopterasort.sh</testScript>
      <files>remote-scripts/ica/perf_hadoopterasort.sh</files>
      <timeout>18000</timeout>
      <onError>Continue</onError>
      <noReboot>False</noReboot>
      <testparams>
        <param>TC_COVERED=PERF-TeraSort</param>
        <param>HADOOP_MASTER_HOSTNAME=hadoopm</param>
        <param>RESOURCE_MANAGER_HOSTNAME=hadoopm</param>
        <param>SLAVE_HOSTNAMES=(slave1 slave2 slave3)</param>
        <param>TERAGEN_RECORDS=500000000</param>
        <param>VM2SERVER=LIS-PERF05</param>
        <param>sshKey=/root/.ssh/ppk_id_rsa</param>
        <!-- Modify HADOOP_VERSION accordingly to file uploaded -->
        <!-- Supports multiple versions; e.g. 2.4.0, 2.7.1.  -->
        <param>HADOOP_VERSION=2.5.2</param>
      </testparams>
      <uploadFiles>
        <file>hadoop.log</file>
        <file>terasort.log</file>
      </uploadFiles>
    </test>
  </testCases>
  <VMs>
    <vm>
      <vmName>hadoopm</vmName>
      <hvServer>LIS-PERF06</hvServer>
      <os>Linux</os>
      <ipv4>
      </ipv4>
      <sshKey>ppk_id_rsa.ppk</sshKey>
      <suite>PerfTeraSort</suite>
      <hardware>
          <create>true</create>
          <numCPUs>4</numCPUs>
          <memSize>18432</memSize>
          <disableDiff>True</disableDiff>
          <nic>VMBus,Vm.Enterprise#1</nic>
      </hardware>
    </vm>
     <vm>
      <role>NonSUT</role>
      <hvServer>LIS-PERF05</hvServer>
      <vmName>slave1</vmName>
      <os>Linux</os>
      <ipv4>
      </ipv4>
      <sshKey>ppk_id_rsa.ppk</sshKey>
      <hardware>
          <create>true</create>
          <numCPUs>4</numCPUs>
          <memSize>18432</memSize>
          <disableDiff>True</disableDiff>
          <nic>VMBus,Vm.Enterprise#1,001600112233</nic>
      </hardware>
    </vm>
    <vm>
      <role>NonSUT</role>
      <hvServer>LIS-PERF05</hvServer>
      <vmName>slave2</vmName>
      <os>Linux</os>
      <ipv4>
      </ipv4>
      <sshKey>ppk_id_rsa.ppk</sshKey>
      <hardware>
          <create>true</create>
          <numCPUs>4</numCPUs>
          <memSize>18432</memSize>
          <disableDiff>True</disableDiff>
          <nic>VMBus,Vm.Enterprise#1,001600112234</nic>
      </hardware>
    </vm>
    <vm>
      <role>NonSUT</role>
      <hvServer>LIS-PERF05</hvServer>
      <vmName>slave3</vmName>
      <os>Linux</os>
      <ipv4>
      </ipv4>
      <sshKey>ppk_id_rsa.ppk</sshKey>
      <hardware>
          <create>true</create>
          <numCPUs>4</numCPUs>
          <memSize>18432</memSize>
          <disableDiff>True</disableDiff>
          <nic>VMBus,Vm.Enterprise#1,001600112235</nic>
      </hardware>
    </vm>
  </VMs>
</config>